8/18/2020

ASTM-style timestamps:

Only a subset of ASTM-3339 conformant timestamps are accepted. They must satisfy the regular expression below.
Note that signed numeric timezones and leap seconds are supported.
Note also that nanosecond resolution is not provided, and that times that differ only in fractions of a second smaller than 1/10000000 will resolve to the same time in the database)
Note finally that timestamps with timezones omit the Z indicator.

^((19|20)[0-9][0-9]-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|([\+|\-]([01][b0-9]|2[0-3]):[0-5][0-9])))$

Here are some working examples:

2020-10-15T10:10:10Z
1920-10-15T10:10:10Z
2020-10-15T10:10:10.1Z
2020-10-15T10:10:10.1111Z
2020-10-15T10:10:10.7654321Z
2020-10-15T10:10:10+07:00
2020-10-15T10:10:10-07:00

Database validation semantics for models

These are the error messages that might be encountered during submission to the
data pipeline. They are almost univerally in the form of "<ASTM OR X3 MODEL
NAME>_<KEY NAME>_<ERROR CONDITION> or prose-like with model and offending values
or referring ids. When explanations are provided, they might include a JSON path
from the root of the JSON object to the offending or missing item. Items in
quotes are from descriptions of the ASTM 0.3.5 swagger file or X3 swagger files.
Not all of these diagnostics may be encountered: errors of syntax are likely to
be signaled and the model instance rejected before the faulty model 

For ASTM OPERATIONS:

    OPERATION VOLUMES OBJECT MISSING FOR OPERATION ID % - a required field is missing: operation.details.volumes
    OPERATION VOLUME START TIME NOT RFC3339 COMPLIANT FOR OPERATION ID % 
    OPERATION VOLUME END TIME NOT RFC3339 COMPLIANT FOR OPERATION ID %
    OPERATION VOLUME START TIME OUTSIDE OF OPERATION FOR OPERATION ID % - a single volume within an operation has a start time before the operation start time
    OPERATION VOLUME END TIME OUTSIDE OF OPERATION TIMES FOR OPERATION ID % - a single volume within an operation has an end time after the operation end time
    BOTH POLYGON AND RADIUS IN VOLUME FOR OPERATION ID % - "Exactly one of `outline_polygon` or `outline_circle` must be specified"
    OPERATION VOLUME VERTICES OBJECT MISSING FOR OPERATION ID % - a required field is missing: operation.volumes.volume.outline_polygon.vertices
    TOO FEW POINTS IN POLYGON VOLUME IN OPERATION ID % - at least 3 vertices must be specified for a polygon
    LAST AND FIRST POINT EQUAL IN POLYGON VOLUME IN OPERATION ID % - "In particular, the final polygon vertex shall not be identical to the first vertex"
    NO POLYGON OR RADIUS IN VOLUME IN OPERATION ID % - "Exactly one of `outline_polygon` or `outline_circle` must be specified"

    OPERATION POLYGON PERIMETER CONTAINS DUPLICATE POINTS FOR OPERATION ID - "Vertices may not be duplicated."
    OPERATION POLYGON VOLUME NOT VALID (%) FOR OPERATION ID - "Edges may not cross."
    OPERATION POLYGON VOLUME NOT COMPLIANT (CONTAINS INTERIOR RING) FOR OPERATION ID

    operation_id_missing
    operation_ovn_length_too_long_or_short
    operation_owner_missing
    operation_state_enum_illegal_value - operation.details.state contains a value is not "Accepted", "Activated", "NonConforming", "Contingent", or "Ended"
    operation_subscription_id_missing
    operation_time_end_missing_or_not_rfc3339
    operation_time_end_precedes_start - an operation ends before it begins, according to its time_start and time_end keys
    operation_time_start_missing_or_not_rfc3339
    operation_uss_base_url_missing
    operation_uss_base_url_too_long_rfc7230 - the url is more than 8000 characters long
    operations_version_less_than_minimum - version number is less than 1
    operations_version_missing

For ASTM OPERATION DETAILS:

    detail_volume_altitude_lower_missing
    detail_volume_altitude_upper_missing
    detail_volume_lower_altitude_above_upper_altitude
    detail_volume_lower_altitude_too_high - > 100000
    detail_volume_lower_altitude_too_low - <= -8000.0
    detail_volume_time_end_missing
    detail_volume_time_end_precedes_start
    detail_volume_time_start_missing
    detail_volume_upper_altitude_too_high - > 100000
    detail_volume_upper_altitude_too_low <= -8000.0
    detail_volume_latitude_not_null - latitude is missing. Could be named better.
    detail_volume_latitude_out_of_range - not between -90 and 90
    detail_volume_longitude_not_null - longitude is missing. Could be named better.
    detail_volume_longitude_out_of_range - not between  -180 and 180
    detail_volume_radius_not_specified - outline_circle will accept a center without a radius, but the database won't

For NASA VEHICLE_TELEMETRY

    TELEMETRY POSITION EXTRAPOLATED WITHOUT EXPLICIT ACCURACY FOR ENTITY ID %' - "Note: 'accuracy' values are required when extrapolat\
ed field is true"
    TELEMETRY CONTAINED NEITHER POSITION NOR VELOCITY FOR ENTITY ID % - the GetOperationTelemetryResponse model will allow you specify neither position or velocity, but the database won't

    vehicle_telemetry_entity_id_missing
    vehicle_telemetry_time_measured_missing_or_not_rfc3339

    vehicle_telemetry_speed_is_negative 
    vehicle_telemetry_speed_is_ridiculously_high - nearly three times the speed of sound. Probably a mistake.
    vehicle_telemetry_speed_missing 
    vehicle_telemetry_track_out_of_range - not in range 0 and 360 (not inclusive)

    vehicle_telemetry_altitude_missing
    vehicle_telemetry_altitude_too_high - > 100000
    vehicle_telemetry_altitude_too_low - < -8000
    vehicle_telemetry_latitude_not_null - latitude missing. Could be named better.
    vehicle_telemetry_latitude_out_of_range - not between -90 and 90
    vehicle_telemetry_longitude_not_null - longitude is missing. Could be named better.
    vehicle_telemetry_longitude_out_of_range - longitude not between -180 and 180
    vehicle_telemetry_accuracy_h_bad_value - value was not "HAUnknown", "HA10NMPlus", "HA10NM", "HA4NM", etc.
    vehicle_telemetry_accuracy_v_bad_value - value was not "VAUnknown", "VA150mPlus", "VA150m", etc.

For X3 PSU_EXCHANGE

    PSU EXCHANGE EXCHANGED DATA TYPE IS OTHERS_SEE_COMMENTS BUT COMMENTS IS NULL FOR EXCHANGED DATA PK % 
    PSU EXCHANGE TIME INITIATED IS AFTER TIME_COMPLETED FOR EXCHANGE DATA PK % - request was completed before it was initiated, by the timestamps. Probably an error.
    PSU EXCHANGE EXPECTED HTTP RESPONSE IS REQUIRED FOR SOURCE PSU FOR EXCHANGED DATA PK %
    PSU EXCHANGE FRI LIST <generic UUID format errors> - there are things that are not UUIDS in the list of UUIDS.
    PSU EXCHANGE CONTAINS NO RECORDS - 

    psu_exchange_actual_http_response_missing
    psu_exchange_exchanged_data_type_contains_illegal_value
    psu_exchange_http_method_illegal_value
    psu_exchange_reporting_psu_role_illegal_value
    psu_exchange_reporting_psu_role_is_null - psu_role is missing. Could be named better. Sorry. 
    psuexchange_time_request_completed_missing_or_not_rfc3339
    psuexchange_time_request_initiation_missing_or_not_rfc3339

For X3 WAYPOINTS

    WAYPOINT SUBMISSION CONTAINS NO WAYPOINTS
    WAYPOINT SEQUENCE_IDS MUST BE SEQUENTIAL FOR OPERATION % - "[Waypoints] must be sequential starting with 1."
    WAYPOINT SEQUENCE_ID MUST START AT 1 FOR OPERATION %, NOT % - "[Waypoints] must be sequential starting with 1."
    WAYPOINT TARGET TIMES OUT OF ORDER FOR OPERATION % - waypoint times are not in the same order as their sequence ids.
    WAYPOINT SEQUENCE_IDS MUST BE SEQUENTIAL AFTER UPDATE FOR OPERATION % - waypoint lists must be sequential, and must start at 1, even after updates.
    WAYPOINT TARGET TIME REPEATED FOR OPERATION % - can't be at two waypoints at the same time. Probably an error.

    waypoint_waypoint_sequence_id_must_not_be_repeated - "[Waypoints] must be sequential starting with 1."
    waypoint_altitude_must_be_specified
    waypoint_altitude_too_high - > 100000
    waypoint_altitude_too_low - < -8000
    waypoint_flight_phase_must_be_specified
    waypoint_flight_phase_value_not_recognized - flight phase is not one of "GROUND_TAXI", "GROUND_HOVER", "TAKEOFF", etc.
    waypoint_hover_duration_must_be_specified
    waypoint_hover_duration_must_not_be_negative
    waypoint_id_must_be_specified
    waypoint_sequence_less_than_1 - "[Waypoints] must be sequential starting with 1."
    waypoint_sequence_must_be_specified
    waypoint_target_air_speed_must_not_be_negative
    waypoint_target_ground_speed_must_be_specified
    waypoint_target_ground_speed_must_not_be_negative
    waypoint_target_time_must_be_specified_and_rfc3339_compliant
    waypoint_target_vertical_speed_must_be_specified
    waypoint_type_must_be_specified
    waypoint_type_value_not_recognized - type is not "FLY_BY" or "FLY_OVER"

For NASA FTR_METADATA

    FLIGHTRUNMETADATA OPERATION_IDS ERROR:<generic UUID format errors>: FOR FRI % - there are things that are not UUIDS in the list of UUIDS.
    FLIGHTRUNMETADATA SPECIFIED NO CREW FOR FRI $%
    FLIGHTRUNMETADATA SPECIFIED NO METADATA

    metadata_crew_email_poorly_formed - regular expression for email is '[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}'
    metadata_crewmember_missing_role
    flightrunmetadata_fri_tag_is_missing
    metadata_flight_type_missing
    metadata_flight_type_not_recognized - flight_type is not AIRSPACE_SIMULATION, FLIGHT_SIMULATION or LIVE_FLIGHT
    metadata_fri_is_missing
    metadata_missing_partner_name
    metadata_missing_start_time_or_not_rfc_3339
    metadata_psu_url_missing
    metadata_psu_url_too_long_rfc7230
    metadata_scenario_id_missing
    metadata_scenario_id_unrecognized
    metadata_test_id_missing
    metadata_test_id_not_recognized

For ASTM REPORTS 

    report_problem_must_be_specified
    report_report_id_must_be_specified
    report_report_id_too_long - report_id is longer than 128 characters
    report_response_code_must_be_specified
    report_response_code_value_not_recognized - must be greater than or equal to 400
    report_url_is_too_long_rfc7230 - url is greater than 8000 characters
    report_url_must_be_specified

for ASTM CONSTRAINTS

    CONSTRAINT VOLUMES OBJECT MISSING FOR OPERATION ID %  - a required field is missing: constraint.details.volumes
    CONSTRAINT VOLUME START TIME NOT RFC3339 COMPLIANT FOR CONSTRAINT ID %
    CONSTRAINT VOLUME END TIME NOT RFC3339 COMPLIANT FOR CONSTRAINT ID %
    CONSTRAINT VOLUME START TIME OUTSIDE OF % TIMES FOR CONSTRAINT ID % - a single volume within an constraint has a start time before the constraint start time
    CONSTRAINT VOLUME END TIME OUTSIDE OF % TIMES FOR CONSTRAINT ID % - a single volume within an constraint has an end time after the constraint end time
    CONSTRAINT BOTH POLYGON AND RADIUS IN VOLUME FOR CONSTRAINT ID % - "Exactly one of `outline_polygon` or `outline_circle` must be specified"
    CONSTRAINT VOLUME VERTICES OBJECT MISSING FOR CONSTRAINT ID % a required field is missing: constraint.volumes.volume.outline_polygon.vertices
    CONSTRAINT TOO FEW POINTS IN POLYGON VOLUME IN CONSTRAINT ID % - at least 3 vertices must be specified for a polygon
    CONSTRAINT LAST AND FIRST POINT EQUAL IN POLYGON VOLUME IN CONSTRAINT ID % - "In particular, the final polygon vertex shall not be identical to the first vertex."
    CONSTRAINT NO POLYGON OR RADIUS IN VOLUME IN CONSTRAINT ID % - "Exactly one of `outline_polygon` or `outline_circle` must be specified"

    CONSTRAINT POLYGON PERIMETER CONTAINS DUPLICATE POINTS FOR CONSTRAINT ID - "Vertices may not be duplicated."
    CONSTRAINT POLYGON VOLUME NOT VALID (%) FOR CONSTRAINT ID - "Edges may not cross."
    CONSTRAINT POLYGON VOLUME NOT COMPLIANT (CONTAINS INTERIOR RING) FOR CONSTRAINT ID

For X3 CONPRERUNOPS

    conprerunop_alternate_landing_locations_must_be_specified
    conprerunop_id_must_be_specified
    conprerunop_planned_landing_location_must_be_specified
    conprerunop_planned_takeoff_location_must_be_specified

For X3 OFFNOMINALRESPONSE

    offnominalresponse_id_must_be_specified CHECK ((operation_id IS NOT NULL)),
    offnominalresponse_landing_location_must_be_specified CHECK ((landing_location IS NOT NULL)),
    offnominalresponse_response_time_missing CHECK ((response_time IS NOT NULL)),
    offnominalresponse_response_value_not_recognized - value is not 'GO_AROUND_INITIATED', 'ALTERNATE_LANDING_INITIATED', etc.

For X3 FLIGHTESSENTIALTELEMETRY

    flightessentialtelemetry_id_must_be_specified
    flightessentialtelemetry_sensor_not_recognized - sensor is not 'LAT', 'LON', 'ALT', 'NAVIGATION_ACCURACY_CATEGORY_POSITION',  'GEOMETRIC_VERTICAL_ACCURACY_CATEGORY', etc.
    flightessentialtelemetry_timestamp_must_be_specified

For X3 CONSTRAINTOCCURRENCE

    constraintoccurrence_id_must_be_specified
    constraintoccurrence_message_protocol_value_not_recognized - protocol is not 'HTTP', 'WEBSOCKETS', 'EMAIL',, 'SMS' or, 'OTHER'
    constraintoccurrence_occurrence_id_must_be_specified
    constraintoccurrence_psu_received_missing
    constraintoccurrence_time_psu_sent_missing
    constraintoccurrence_time_response_from_operator_received_missi 
